always @(*) begin
    case(fsm_state)
        IDLE:
            next_state <= (iniciar_giroscopio) ? READ_BYTE_1 : fsm_state;
        READ_BYTE_1:
            next_state <= (byte1_read) ? STOP : fsm_state;
        READ_BYTE_2:
            next_state <= (byte2_read) ? STOP : fsm_state;
        STOP: begin
            if (detener_giroscopio) begin
                next_state <= IDLE;
            end else if (avail_i2c_master)
                if ((byte1_read == 0) && (byte2_read ==0)) begin
                    next_state <= READ_BYTE_1;
                end else if (byte1_read)
                    next_state <= READ_BYTE_2;
            else begin
                next_state <= STOP;
            end
        end
        default:
            next_state <= IDLE;
    endcase
end
